(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(8),r=a.n(i),o=a(2),c=a(3),s=a(5),u=a(4),d=a(6),h=a(1),v=a(9),p=a.n(v),g=function(e){return l.a.createElement("header",null,l.a.createElement("button",{onClick:e.save},"Save"),l.a.createElement("label",null,"Level index:",l.a.createElement("input",{type:"text",placeholder:"1",value:e.levelIndex,onChange:e.onChange})),l.a.createElement("label",null,"Load level:",l.a.createElement("input",{id:"file",type:"file",onChange:e.fileUpload})))},f=function(e){var t=e.grid.map(function(e){return e.map(function(e){return e})});return l.a.createElement("div",{style:{width:e.width},className:"grid"},t)},m=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={x:e.x,y:e.y,tileData:e.tileData},a.tileClick=a.tileClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.tileData!==this.props.tileData&&this.setState({tileData:this.props.tileData})}},{key:"tileClick",value:function(){var e=this.state,t=e.x,a=e.y;e.tileData;this.setState({tileData:this.props.currentTile}),this.props.onChange(t,a,this.props.currentTile)}},{key:"changeColor",value:function(){var e=this.state.tileData,t="blue";return 0===e&&(t="green"),1===e&&(t="brown"),{backgroundColor:t}}},{key:"render",value:function(){var e=this.state.tileData;return l.a.createElement("div",{"data-id":e,style:this.changeColor(),className:"tile",onClick:this.tileClick},"Data:",e)}}]),t}(n.Component),b=function(e){return l.a.createElement("div",{className:"tile-selector"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("button",{onClick:function(){return e.selectTile(-1)}},"Air")),l.a.createElement("li",null,l.a.createElement("button",{onClick:function(){return e.selectTile(0)}},"Grass")),l.a.createElement("li",null,l.a.createElement("button",{onClick:function(){return e.selectTile(1)}},"Ground"))))},y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={worldWidth:2400,worldHeight:800,grid:[],gridItems:[],currentTile:-1,levelIndex:""},a.saveLayout=a.saveLayout.bind(Object(h.a)(Object(h.a)(a))),a.changeCurrentTile=a.changeCurrentTile.bind(Object(h.a)(Object(h.a)(a))),a.changeLevelIndex=a.changeLevelIndex.bind(Object(h.a)(Object(h.a)(a))),a.tileChanged=a.tileChanged.bind(Object(h.a)(Object(h.a)(a))),a.fileUpload=a.fileUpload.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.grid!==this.state.grid&&this.createGridItems()}},{key:"componentDidMount",value:function(){this.createGrid()}},{key:"changeCurrentTile",value:function(e){this.setState({currentTile:e})}},{key:"saveLayout",value:function(){var e=this.state,t=e.grid,a=e.levelIndex,n=[],l=0;if(""!==a){for(var i=document.querySelectorAll(".tile"),r=0;r<t.length;r++){n[r]=[];for(var o=0;o<t[r].length;o++)n[r].push(parseInt(i[l].getAttribute("data-id"))),l++}var c=JSON.stringify({level:n}),s=new Blob([c],{type:"application/json"});p.a.saveAs(s,"level".concat(a,".json"))}}},{key:"createGridItems",value:function(){var e=this.state.grid,t=[];console.log(e.length);for(var a=0;a<e.length;a++){t[a]=[];for(var n=0;n<e[a].length;n++){var i=e[a][n];t[a].push(l.a.createElement(m,{key:"".concat(i.position.x).concat(i.position.y),currentTile:this.state.currentTile,tileData:i.tileData,onChange:this.tileChanged,x:i.position.x,y:i.position.y}))}}this.setState({gridItems:t})}},{key:"tileChanged",value:function(e,t,a){console.log(e,t,a);var n=this.state.grid;n[t][e].tileData=a,console.log(n[t][e]),this.setState({grid:n})}},{key:"createGrid",value:function(){for(var e=this.state,t=e.worldWidth,a=e.worldHeight,n=(e.currentTile,t/50),l=a/50,i=[],r=0;r<l;r++){i[r]=[];for(var o=0;o<n;o++)i[r].push({position:{x:o,y:r},tileData:-1})}this.setState({grid:i})}},{key:"changeLevelIndex",value:function(e){var t=e.target.value;this.setState({levelIndex:t})}},{key:"fileUpload",value:function(e){var t=this,a=document.getElementById("file").files[0],n=new FileReader;n.readAsText(a),n.addEventListener("load",function(){var e=JSON.parse(n.result);t.fileUploadProcess(e.level)})}},{key:"fileUploadProcess",value:function(e){for(var t=[],a=0;a<e.length;a++){t[a]=[];for(var n=0;n<e[a].length;n++)t[a].push({position:{x:n,y:a},tileData:e[a][n]})}this.setState({grid:t})}},{key:"render",value:function(){var e=this.state,t=e.worldWidth,a=e.gridItems,n=e.levelIndex;return l.a.createElement("div",{className:"App"},l.a.createElement(g,{levelIndex:n,onChange:this.changeLevelIndex,save:this.saveLayout,fileUpload:this.fileUpload}),l.a.createElement(f,{grid:a,width:t}),l.a.createElement(b,{selectTile:this.changeCurrentTile}))}}]),t}(n.Component);a(16);r.a.render(l.a.createElement(y,null),document.getElementById("root"))}},[[10,2,1]]]);
//# sourceMappingURL=main.6a79ffd0.chunk.js.map